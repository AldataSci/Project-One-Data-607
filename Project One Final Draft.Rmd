---
title: "Project One Data 607"
author: "Al Haque"
date: "`r Sys.Date()`"
output: openintro::lab_report
---

```{r}
library(readr)
library(stringr)
library(tidyverse)

data <- readLines("https://raw.githubusercontent.com/AldataSci/Project-One-Data-607/main/tournament.txt",n=-1)
head(data)
```
```{r}
##Start the sequence at the 5 element in the list and count every 3 elements
Names <-data[seq(5,length(data),3)]
Names <-str_trim(str_extract(Names,'[A-Z].{1,26}'))
head(Names)
```

```{r}
subset <- data[seq(6,length(data),3)]
State <- str_extract(subset,"[A-Z]{2}")
head(State)
```

```{r}
points <- data[seq(5,length(data),3)]
totalpts <- str_extract(points,'(\\d{1})(\\.)(\\d{1})')
totalpts <- as.numeric(totalpts)
totalpts
```
```{r}
Elo <- str_extract(data,"R: ....")
Elo <- str_extract(Elo,"....$")
ActualElo <- Elo[!is.na(Elo)]
ActualElo <-as.integer(ActualElo)
head(ActualElo)
```

```{r}
## calculate the rounds each player faced
round <- data[seq(5,length(data),3)]
round <- str_extract_all(round,'[A-Z]\\s{2,}\\d+')
round <- str_extract_all(round,'\\d{1,}')
head(round)

```


```{r}
## Creating an empty list and finding the subset, convert it to integer and looped it to get the elo and append it to a position of a list, then rounded the list 

list <- c()
i <- 1
for(i in c(1:length(round))){
round[[i]]
as.integer(unlist(round[[i]]))
ActualElo[as.integer(unlist(round[[i]]))]
list[i] <- mean(ActualElo[as.integer(unlist(round[[i]]))])   ## list[i] helps append the number at a certain position
i <- i + 1    ## increment by 1 
}
AvgElo <- round(list)
AvgElo
```
```{r}
project_1 <- data.frame(Names,State,totalpts,ActualElo,AvgElo)

write_csv(project_1,'C:\\Users\\Al Haque\\Desktop\\Data Science Semester 1\\Project 1 Data 607\\PlayersAndTheirElo.csv',append=FALSE)
```

